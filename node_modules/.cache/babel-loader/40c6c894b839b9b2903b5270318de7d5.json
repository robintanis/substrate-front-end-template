{"ast":null,"code":"var _jsxFileName = \"/home/robin/substrate-front-end-template/src/Upgrade.js\";\nimport React, { useState } from 'react';\nimport { Form, Input, Grid } from 'semantic-ui-react';\nimport { TxButton } from './substrate-lib/components';\nexport default function Main(props) {\n  const [status, setStatus] = useState('');\n  const [proposal, setProposal] = useState({});\n  const {\n    accountPair\n  } = props;\n\n  const bufferToHex = buffer => {\n    return Array.from(new Uint8Array(buffer)).map(b => b.toString(16).padStart(2, '0')).join('');\n  };\n\n  const handleFileChosen = file => {\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = e => {\n      const content = bufferToHex(fileReader.result);\n      setProposal(`0x${content}`);\n    };\n\n    fileReader.readAsArrayBuffer(file);\n  };\n\n  return /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }, \"Upgrade Runtime\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"file\",\n    id: \"file\",\n    label: \"Wasm File\",\n    accept: \".wasm\",\n    onChange: e => handleFileChosen(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Field, {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TxButton, {\n    accountPair: accountPair,\n    label: \"Upgrade\",\n    type: \"UNCHECKED-SUDO-TX\",\n    setStatus: setStatus,\n    attrs: {\n      palletRpc: 'system',\n      callable: 'setCode',\n      inputParams: [proposal],\n      paramFields: [true]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      overflowWrap: 'break-word'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, status)));\n}","map":{"version":3,"sources":["/home/robin/substrate-front-end-template/src/Upgrade.js"],"names":["React","useState","Form","Input","Grid","TxButton","Main","props","status","setStatus","proposal","setProposal","accountPair","bufferToHex","buffer","Array","from","Uint8Array","map","b","toString","padStart","join","handleFileChosen","file","fileReader","FileReader","onloadend","e","content","result","readAsArrayBuffer","target","files","textAlign","palletRpc","callable","inputParams","paramFields","overflowWrap"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,IAAtB,QAAkC,mBAAlC;AACA,SAASC,QAAT,QAAyB,4BAAzB;AAEA,eAAe,SAASC,IAAT,CAAeC,KAAf,EAAsB;AACnC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAkBL,KAAxB;;AAEA,QAAMM,WAAW,GAAGC,MAAM,IAAI;AAC5B,WAAOC,KAAK,CAACC,IAAN,CAAW,IAAIC,UAAJ,CAAeH,MAAf,CAAX,EACJI,GADI,CACAC,CAAC,IAAIA,CAAC,CAACC,QAAF,CAAW,EAAX,EAAeC,QAAf,CAAwB,CAAxB,EAA2B,GAA3B,CADL,EAEJC,IAFI,CAEC,EAFD,CAAP;AAGD,GAJD;;AAMA,QAAMC,gBAAgB,GAAGC,IAAI,IAAI;AAC/B,UAAMC,UAAU,GAAG,IAAIC,UAAJ,EAAnB;;AACAD,IAAAA,UAAU,CAACE,SAAX,GAAuBC,CAAC,IAAI;AAC1B,YAAMC,OAAO,GAAGhB,WAAW,CAACY,UAAU,CAACK,MAAZ,CAA3B;AACAnB,MAAAA,WAAW,CAAE,KAAIkB,OAAQ,EAAd,CAAX;AACD,KAHD;;AAKAJ,IAAAA,UAAU,CAACM,iBAAX,CAA6BP,IAA7B;AACD,GARD;;AAUA,sBACE,oBAAC,IAAD,CAAM,MAAN;AAAa,IAAA,KAAK,EAAE,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,EAAE,EAAC,MAFL;AAGE,IAAA,KAAK,EAAC,WAHR;AAIE,IAAA,MAAM,EAAC,OAJT;AAKE,IAAA,QAAQ,EAAEI,CAAC,IAAIL,gBAAgB,CAACK,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CALjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAUE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AACE,IAAA,WAAW,EAAEtB,WADf;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,IAAI,EAAC,mBAHP;AAIE,IAAA,SAAS,EAAEH,SAJb;AAKE,IAAA,KAAK,EAAE;AACL0B,MAAAA,SAAS,EAAE,QADN;AAELC,MAAAA,QAAQ,EAAE,SAFL;AAGLC,MAAAA,WAAW,EAAE,CAAC3B,QAAD,CAHR;AAIL4B,MAAAA,WAAW,EAAE,CAAC,IAAD;AAJR,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAVF,eAwBE;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,YAAY,EAAE;AAAhB,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6C/B,MAA7C,CAxBF,CAFF,CADF;AA+BD","sourcesContent":["import React, { useState } from 'react';\nimport { Form, Input, Grid } from 'semantic-ui-react';\nimport { TxButton } from './substrate-lib/components';\n\nexport default function Main (props) {\n  const [status, setStatus] = useState('');\n  const [proposal, setProposal] = useState({});\n  const { accountPair } = props;\n\n  const bufferToHex = buffer => {\n    return Array.from(new Uint8Array(buffer))\n      .map(b => b.toString(16).padStart(2, '0'))\n      .join('');\n  };\n\n  const handleFileChosen = file => {\n    const fileReader = new FileReader();\n    fileReader.onloadend = e => {\n      const content = bufferToHex(fileReader.result);\n      setProposal(`0x${content}`);\n    };\n\n    fileReader.readAsArrayBuffer(file);\n  };\n\n  return (\n    <Grid.Column width={8}>\n      <h1>Upgrade Runtime</h1>\n      <Form>\n        <Form.Field>\n          <Input\n            type='file'\n            id='file'\n            label='Wasm File'\n            accept='.wasm'\n            onChange={e => handleFileChosen(e.target.files[0])}\n          />\n        </Form.Field>\n        <Form.Field style={{ textAlign: 'center' }}>\n          <TxButton\n            accountPair={accountPair}\n            label='Upgrade'\n            type='UNCHECKED-SUDO-TX'\n            setStatus={setStatus}\n            attrs={{\n              palletRpc: 'system',\n              callable: 'setCode',\n              inputParams: [proposal],\n              paramFields: [true]\n            }}\n          />\n        </Form.Field>\n        <div style={{ overflowWrap: 'break-word' }}>{status}</div>\n      </Form>\n    </Grid.Column>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}