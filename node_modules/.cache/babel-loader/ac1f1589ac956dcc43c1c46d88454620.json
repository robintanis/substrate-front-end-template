{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classPrivateFieldLooseBase2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classPrivateFieldLooseBase\"));\n\nvar _classPrivateFieldLooseKey2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classPrivateFieldLooseKey\"));\n\nvar _util = require(\"@polkadot/util\"); // Copyright 2017-2020 @polkadot/api authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n\nvar _allHasFired = (0, _classPrivateFieldLooseKey2.default)(\"allHasFired\");\n\nvar _callback = (0, _classPrivateFieldLooseKey2.default)(\"callback\");\n\nvar _fired = (0, _classPrivateFieldLooseKey2.default)(\"fired\");\n\nvar _fns = (0, _classPrivateFieldLooseKey2.default)(\"fns\");\n\nvar _isActive = (0, _classPrivateFieldLooseKey2.default)(\"isActive\");\n\nvar _results = (0, _classPrivateFieldLooseKey2.default)(\"results\");\n\nvar _subscriptions = (0, _classPrivateFieldLooseKey2.default)(\"subscriptions\");\n\nclass Combinator {\n  constructor(fns, callback) {\n    Object.defineProperty(this, _allHasFired, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _callback, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _fired, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _fns, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _isActive, {\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, _results, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _subscriptions, {\n      writable: true,\n      value: []\n    });\n    (0, _classPrivateFieldLooseBase2.default)(this, _callback)[_callback] = callback; // eslint-disable-next-line @typescript-eslint/require-await\n\n    (0, _classPrivateFieldLooseBase2.default)(this, _subscriptions)[_subscriptions] = fns.map(async (input, index) => {\n      const [fn, ...args] = Array.isArray(input) ? input : [input];\n\n      (0, _classPrivateFieldLooseBase2.default)(this, _fired)[_fired].push(false);\n\n      (0, _classPrivateFieldLooseBase2.default)(this, _fns)[_fns].push(fn); // Not quite 100% how to have a variable number at the front here\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/ban-types\n\n\n      return fn(...args, this._createCallback(index));\n    });\n  }\n\n  _allHasFired() {\n    if (!(0, _classPrivateFieldLooseBase2.default)(this, _allHasFired)[_allHasFired]) {\n      (0, _classPrivateFieldLooseBase2.default)(this, _allHasFired)[_allHasFired] = (0, _classPrivateFieldLooseBase2.default)(this, _fired)[_fired].filter(hasFired => !hasFired).length === 0;\n    }\n\n    return (0, _classPrivateFieldLooseBase2.default)(this, _allHasFired)[_allHasFired];\n  }\n\n  _createCallback(index) {\n    return value => {\n      (0, _classPrivateFieldLooseBase2.default)(this, _fired)[_fired][index] = true;\n      (0, _classPrivateFieldLooseBase2.default)(this, _results)[_results][index] = value;\n\n      this._triggerUpdate();\n    };\n  }\n\n  _triggerUpdate() {\n    if (!(0, _classPrivateFieldLooseBase2.default)(this, _isActive)[_isActive] || !(0, _util.isFunction)((0, _classPrivateFieldLooseBase2.default)(this, _callback)[_callback]) || !this._allHasFired()) {\n      return;\n    }\n\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      (0, _classPrivateFieldLooseBase2.default)(this, _callback)[_callback]((0, _classPrivateFieldLooseBase2.default)(this, _results)[_results]);\n    } catch (error) {// swallow, we don't want the handler to trip us up\n    }\n  }\n\n  unsubscribe() {\n    if (!(0, _classPrivateFieldLooseBase2.default)(this, _isActive)[_isActive]) {\n      return;\n    }\n\n    (0, _classPrivateFieldLooseBase2.default)(this, _isActive)[_isActive] = false; // eslint-disable-next-line @typescript-eslint/no-misused-promises\n\n    (0, _classPrivateFieldLooseBase2.default)(this, _subscriptions)[_subscriptions].forEach(async subscription => {\n      try {\n        const unsubscribe = await subscription;\n\n        if ((0, _util.isFunction)(unsubscribe)) {\n          unsubscribe();\n        }\n      } catch (error) {// ignore\n      }\n    });\n  }\n\n}\n\nexports.default = Combinator;","map":{"version":3,"sources":["/home/robin/substrate-front-end-template/node_modules/@polkadot/api/promise/Combinator.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_classPrivateFieldLooseBase2","_classPrivateFieldLooseKey2","_util","_allHasFired","_callback","_fired","_fns","_isActive","_results","_subscriptions","Combinator","constructor","fns","callback","writable","map","input","index","fn","args","Array","isArray","push","_createCallback","filter","hasFired","length","_triggerUpdate","isFunction","error","unsubscribe","forEach","subscription"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,4BAA4B,GAAGP,sBAAsB,CAACC,OAAO,CAAC,mDAAD,CAAR,CAAzD;;AAEA,IAAIO,2BAA2B,GAAGR,sBAAsB,CAACC,OAAO,CAAC,kDAAD,CAAR,CAAxD;;AAEA,IAAIQ,KAAK,GAAGR,OAAO,CAAC,gBAAD,CAAnB,C,CAEA;AACA;;;AACA,IAAIS,YAAY,GAAG,CAAC,GAAGF,2BAA2B,CAACF,OAAhC,EAAyC,aAAzC,CAAnB;;AAEA,IAAIK,SAAS,GAAG,CAAC,GAAGH,2BAA2B,CAACF,OAAhC,EAAyC,UAAzC,CAAhB;;AAEA,IAAIM,MAAM,GAAG,CAAC,GAAGJ,2BAA2B,CAACF,OAAhC,EAAyC,OAAzC,CAAb;;AAEA,IAAIO,IAAI,GAAG,CAAC,GAAGL,2BAA2B,CAACF,OAAhC,EAAyC,KAAzC,CAAX;;AAEA,IAAIQ,SAAS,GAAG,CAAC,GAAGN,2BAA2B,CAACF,OAAhC,EAAyC,UAAzC,CAAhB;;AAEA,IAAIS,QAAQ,GAAG,CAAC,GAAGP,2BAA2B,CAACF,OAAhC,EAAyC,SAAzC,CAAf;;AAEA,IAAIU,cAAc,GAAG,CAAC,GAAGR,2BAA2B,CAACF,OAAhC,EAAyC,eAAzC,CAArB;;AAEA,MAAMW,UAAN,CAAiB;AACfC,EAAAA,WAAW,CAACC,GAAD,EAAMC,QAAN,EAAgB;AACzBlB,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4BO,YAA5B,EAA0C;AACxCW,MAAAA,QAAQ,EAAE,IAD8B;AAExChB,MAAAA,KAAK,EAAE;AAFiC,KAA1C;AAIAH,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4BQ,SAA5B,EAAuC;AACrCU,MAAAA,QAAQ,EAAE,IAD2B;AAErChB,MAAAA,KAAK,EAAE,KAAK;AAFyB,KAAvC;AAIAH,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4BS,MAA5B,EAAoC;AAClCS,MAAAA,QAAQ,EAAE,IADwB;AAElChB,MAAAA,KAAK,EAAE;AAF2B,KAApC;AAIAH,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4BU,IAA5B,EAAkC;AAChCQ,MAAAA,QAAQ,EAAE,IADsB;AAEhChB,MAAAA,KAAK,EAAE;AAFyB,KAAlC;AAIAH,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4BW,SAA5B,EAAuC;AACrCO,MAAAA,QAAQ,EAAE,IAD2B;AAErChB,MAAAA,KAAK,EAAE;AAF8B,KAAvC;AAIAH,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4BY,QAA5B,EAAsC;AACpCM,MAAAA,QAAQ,EAAE,IAD0B;AAEpChB,MAAAA,KAAK,EAAE;AAF6B,KAAtC;AAIAH,IAAAA,MAAM,CAACC,cAAP,CAAsB,IAAtB,EAA4Ba,cAA5B,EAA4C;AAC1CK,MAAAA,QAAQ,EAAE,IADgC;AAE1ChB,MAAAA,KAAK,EAAE;AAFmC,KAA5C;AAIA,KAAC,GAAGE,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDK,SAAhD,EAA2DA,SAA3D,IAAwES,QAAxE,CA7ByB,CA6ByD;;AAElF,KAAC,GAAGb,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDU,cAAhD,EAAgEA,cAAhE,IAAkFG,GAAG,CAACG,GAAJ,CAAQ,OAAOC,KAAP,EAAcC,KAAd,KAAwB;AAChH,YAAM,CAACC,EAAD,EAAK,GAAGC,IAAR,IAAgBC,KAAK,CAACC,OAAN,CAAcL,KAAd,IAAuBA,KAAvB,GAA+B,CAACA,KAAD,CAArD;;AAEA,OAAC,GAAGhB,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDM,MAAhD,EAAwDA,MAAxD,EAAgEiB,IAAhE,CAAqE,KAArE;;AAEA,OAAC,GAAGtB,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDO,IAAhD,EAAsDA,IAAtD,EAA4DgB,IAA5D,CAAiEJ,EAAjE,EALgH,CAK1C;AACtE;;;AAGA,aAAOA,EAAE,CAAC,GAAGC,IAAJ,EAAU,KAAKI,eAAL,CAAqBN,KAArB,CAAV,CAAT;AACD,KAViF,CAAlF;AAWD;;AAEDd,EAAAA,YAAY,GAAG;AACb,QAAI,CAAC,CAAC,GAAGH,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDI,YAAhD,EAA8DA,YAA9D,CAAL,EAAkF;AAChF,OAAC,GAAGH,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDI,YAAhD,EAA8DA,YAA9D,IAA8E,CAAC,GAAGH,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDM,MAAhD,EAAwDA,MAAxD,EAAgEmB,MAAhE,CAAuEC,QAAQ,IAAI,CAACA,QAApF,EAA8FC,MAA9F,KAAyG,CAAvL;AACD;;AAED,WAAO,CAAC,GAAG1B,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDI,YAAhD,EAA8DA,YAA9D,CAAP;AACD;;AAEDoB,EAAAA,eAAe,CAACN,KAAD,EAAQ;AACrB,WAAOnB,KAAK,IAAI;AACd,OAAC,GAAGE,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDM,MAAhD,EAAwDA,MAAxD,EAAgEY,KAAhE,IAAyE,IAAzE;AACA,OAAC,GAAGjB,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDS,QAAhD,EAA0DA,QAA1D,EAAoES,KAApE,IAA6EnB,KAA7E;;AAEA,WAAK6B,cAAL;AACD,KALD;AAMD;;AAEDA,EAAAA,cAAc,GAAG;AACf,QAAI,CAAC,CAAC,GAAG3B,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDQ,SAAhD,EAA2DA,SAA3D,CAAD,IAA0E,CAAC,CAAC,GAAGL,KAAK,CAAC0B,UAAV,EAAsB,CAAC,GAAG5B,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDK,SAAhD,EAA2DA,SAA3D,CAAtB,CAA3E,IAA2K,CAAC,KAAKD,YAAL,EAAhL,EAAqM;AACnM;AACD;;AAED,QAAI;AACF;AACA,OAAC,GAAGH,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDK,SAAhD,EAA2DA,SAA3D,EAAsE,CAAC,GAAGJ,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDS,QAAhD,EAA0DA,QAA1D,CAAtE;AACD,KAHD,CAGE,OAAOqB,KAAP,EAAc,CAAC;AAChB;AACF;;AAEDC,EAAAA,WAAW,GAAG;AACZ,QAAI,CAAC,CAAC,GAAG9B,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDQ,SAAhD,EAA2DA,SAA3D,CAAL,EAA4E;AAC1E;AACD;;AAED,KAAC,GAAGP,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDQ,SAAhD,EAA2DA,SAA3D,IAAwE,KAAxE,CALY,CAKmE;;AAE/E,KAAC,GAAGP,4BAA4B,CAACD,OAAjC,EAA0C,IAA1C,EAAgDU,cAAhD,EAAgEA,cAAhE,EAAgFsB,OAAhF,CAAwF,MAAMC,YAAN,IAAsB;AAC5G,UAAI;AACF,cAAMF,WAAW,GAAG,MAAME,YAA1B;;AAEA,YAAI,CAAC,GAAG9B,KAAK,CAAC0B,UAAV,EAAsBE,WAAtB,CAAJ,EAAwC;AACtCA,UAAAA,WAAW;AACZ;AACF,OAND,CAME,OAAOD,KAAP,EAAc,CAAC;AAChB;AACF,KATD;AAUD;;AA3Fc;;AA+FjBhC,OAAO,CAACE,OAAR,GAAkBW,UAAlB","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classPrivateFieldLooseBase2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classPrivateFieldLooseBase\"));\n\nvar _classPrivateFieldLooseKey2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classPrivateFieldLooseKey\"));\n\nvar _util = require(\"@polkadot/util\");\n\n// Copyright 2017-2020 @polkadot/api authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nvar _allHasFired = (0, _classPrivateFieldLooseKey2.default)(\"allHasFired\");\n\nvar _callback = (0, _classPrivateFieldLooseKey2.default)(\"callback\");\n\nvar _fired = (0, _classPrivateFieldLooseKey2.default)(\"fired\");\n\nvar _fns = (0, _classPrivateFieldLooseKey2.default)(\"fns\");\n\nvar _isActive = (0, _classPrivateFieldLooseKey2.default)(\"isActive\");\n\nvar _results = (0, _classPrivateFieldLooseKey2.default)(\"results\");\n\nvar _subscriptions = (0, _classPrivateFieldLooseKey2.default)(\"subscriptions\");\n\nclass Combinator {\n  constructor(fns, callback) {\n    Object.defineProperty(this, _allHasFired, {\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, _callback, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _fired, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _fns, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _isActive, {\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, _results, {\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(this, _subscriptions, {\n      writable: true,\n      value: []\n    });\n    (0, _classPrivateFieldLooseBase2.default)(this, _callback)[_callback] = callback; // eslint-disable-next-line @typescript-eslint/require-await\n\n    (0, _classPrivateFieldLooseBase2.default)(this, _subscriptions)[_subscriptions] = fns.map(async (input, index) => {\n      const [fn, ...args] = Array.isArray(input) ? input : [input];\n\n      (0, _classPrivateFieldLooseBase2.default)(this, _fired)[_fired].push(false);\n\n      (0, _classPrivateFieldLooseBase2.default)(this, _fns)[_fns].push(fn); // Not quite 100% how to have a variable number at the front here\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/ban-types\n\n\n      return fn(...args, this._createCallback(index));\n    });\n  }\n\n  _allHasFired() {\n    if (!(0, _classPrivateFieldLooseBase2.default)(this, _allHasFired)[_allHasFired]) {\n      (0, _classPrivateFieldLooseBase2.default)(this, _allHasFired)[_allHasFired] = (0, _classPrivateFieldLooseBase2.default)(this, _fired)[_fired].filter(hasFired => !hasFired).length === 0;\n    }\n\n    return (0, _classPrivateFieldLooseBase2.default)(this, _allHasFired)[_allHasFired];\n  }\n\n  _createCallback(index) {\n    return value => {\n      (0, _classPrivateFieldLooseBase2.default)(this, _fired)[_fired][index] = true;\n      (0, _classPrivateFieldLooseBase2.default)(this, _results)[_results][index] = value;\n\n      this._triggerUpdate();\n    };\n  }\n\n  _triggerUpdate() {\n    if (!(0, _classPrivateFieldLooseBase2.default)(this, _isActive)[_isActive] || !(0, _util.isFunction)((0, _classPrivateFieldLooseBase2.default)(this, _callback)[_callback]) || !this._allHasFired()) {\n      return;\n    }\n\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      (0, _classPrivateFieldLooseBase2.default)(this, _callback)[_callback]((0, _classPrivateFieldLooseBase2.default)(this, _results)[_results]);\n    } catch (error) {// swallow, we don't want the handler to trip us up\n    }\n  }\n\n  unsubscribe() {\n    if (!(0, _classPrivateFieldLooseBase2.default)(this, _isActive)[_isActive]) {\n      return;\n    }\n\n    (0, _classPrivateFieldLooseBase2.default)(this, _isActive)[_isActive] = false; // eslint-disable-next-line @typescript-eslint/no-misused-promises\n\n    (0, _classPrivateFieldLooseBase2.default)(this, _subscriptions)[_subscriptions].forEach(async subscription => {\n      try {\n        const unsubscribe = await subscription;\n\n        if ((0, _util.isFunction)(unsubscribe)) {\n          unsubscribe();\n        }\n      } catch (error) {// ignore\n      }\n    });\n  }\n\n}\n\nexports.default = Combinator;"]},"metadata":{},"sourceType":"script"}