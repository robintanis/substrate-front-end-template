{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.info = info;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"@polkadot/util\");\n\nvar _util2 = require(\"../util\"); // Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n\nfunction dataAsString(data) {\n  return data.isRaw ? (0, _util.u8aToString)(data.asRaw.toU8a(true)) : data.isNone ? undefined : data.toHex();\n}\n\nfunction retrieveNick(api, accountId) {\n  var _api$query$nicks;\n\n  return (accountId && ((_api$query$nicks = api.query.nicks) === null || _api$query$nicks === void 0 ? void 0 : _api$query$nicks.nameOf) ? api.query.nicks.nameOf(accountId) : (0, _rxjs.of)(undefined)).pipe((0, _operators.map)(nameOf => (nameOf === null || nameOf === void 0 ? void 0 : nameOf.isSome) ? (0, _util.u8aToString)(nameOf.unwrap()[0]).substr(0, api.consts.nicks.maxLength.toNumber()) : undefined));\n}\n\nfunction extractIdentity(identityOfOpt, superOf) {\n  if (!(identityOfOpt === null || identityOfOpt === void 0 ? void 0 : identityOfOpt.isSome)) {\n    return {\n      judgements: []\n    };\n  }\n\n  const {\n    info,\n    judgements\n  } = identityOfOpt.unwrap();\n  const topDisplay = dataAsString(info.display);\n  return {\n    display: superOf ? dataAsString(superOf[1]) || topDisplay : topDisplay,\n    displayParent: superOf ? topDisplay : undefined,\n    email: dataAsString(info.email),\n    image: dataAsString(info.image),\n    judgements,\n    legal: dataAsString(info.legal),\n    other: info.additional.reduce((other, [_key, _value]) => {\n      const key = dataAsString(_key);\n      const value = dataAsString(_value);\n\n      if (key && value) {\n        other[key] = value;\n      }\n\n      return other;\n    }, {}),\n    parent: superOf ? superOf[0] : undefined,\n    pgp: info.pgpFingerprint.isSome ? info.pgpFingerprint.unwrap().toHex() : undefined,\n    riot: dataAsString(info.riot),\n    twitter: dataAsString(info.twitter),\n    web: dataAsString(info.web)\n  };\n}\n\nfunction retrieveIdentity(api, accountId) {\n  var _api$query$identity;\n\n  return (accountId && ((_api$query$identity = api.query.identity) === null || _api$query$identity === void 0 ? void 0 : _api$query$identity.identityOf) ? api.queryMulti([[api.query.identity.identityOf, accountId], [api.query.identity.superOf, accountId]]) : (0, _rxjs.of)([undefined, undefined])).pipe((0, _operators.switchMap)(([identityOfOpt, superOfOpt]) => {\n    if (identityOfOpt === null || identityOfOpt === void 0 ? void 0 : identityOfOpt.isSome) {\n      // this identity has something set\n      return (0, _rxjs.of)([identityOfOpt, undefined]);\n    } else if (superOfOpt === null || superOfOpt === void 0 ? void 0 : superOfOpt.isSome) {\n      const superOf = superOfOpt.unwrap(); // we have a super\n\n      return (0, _rxjs.combineLatest)([api.query.identity.identityOf(superOf[0]), (0, _rxjs.of)(superOf)]);\n    } // nothing of value returned\n\n\n    return (0, _rxjs.of)([undefined, undefined]);\n  }), (0, _operators.map)(([identityOfOpt, superOf]) => extractIdentity(identityOfOpt, superOf)));\n}\n/**\n * @name info\n * @description Returns aux. info with regards to an account, current that includes the accountId, accountIndex and nickname\n */\n\n\nfunction info(instanceId, api) {\n  return (0, _util2.memo)(instanceId, address => api.derive.accounts.idAndIndex(address).pipe((0, _operators.switchMap)(([accountId, accountIndex]) => (0, _rxjs.combineLatest)([(0, _rxjs.of)({\n    accountId,\n    accountIndex\n  }), retrieveIdentity(api, accountId), retrieveNick(api, accountId)])), (0, _operators.map)(([{\n    accountId,\n    accountIndex\n  }, identity, nickname]) => ({\n    accountId,\n    accountIndex,\n    identity,\n    nickname\n  }))));\n}","map":{"version":3,"sources":["/home/robin/substrate-front-end-template/node_modules/@polkadot/api-derive/accounts/info.js"],"names":["Object","defineProperty","exports","value","info","_rxjs","require","_operators","_util","_util2","dataAsString","data","isRaw","u8aToString","asRaw","toU8a","isNone","undefined","toHex","retrieveNick","api","accountId","_api$query$nicks","query","nicks","nameOf","of","pipe","map","isSome","unwrap","substr","consts","maxLength","toNumber","extractIdentity","identityOfOpt","superOf","judgements","topDisplay","display","displayParent","email","image","legal","other","additional","reduce","_key","_value","key","parent","pgp","pgpFingerprint","riot","twitter","web","retrieveIdentity","_api$query$identity","identity","identityOf","queryMulti","switchMap","superOfOpt","combineLatest","instanceId","memo","address","derive","accounts","idAndIndex","accountIndex","nickname"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.info = info;\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"@polkadot/util\");\n\nvar _util2 = require(\"../util\");\n\n// Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nfunction dataAsString(data) {\n  return data.isRaw ? (0, _util.u8aToString)(data.asRaw.toU8a(true)) : data.isNone ? undefined : data.toHex();\n}\n\nfunction retrieveNick(api, accountId) {\n  var _api$query$nicks;\n\n  return (accountId && ((_api$query$nicks = api.query.nicks) === null || _api$query$nicks === void 0 ? void 0 : _api$query$nicks.nameOf) ? api.query.nicks.nameOf(accountId) : (0, _rxjs.of)(undefined)).pipe((0, _operators.map)(nameOf => (nameOf === null || nameOf === void 0 ? void 0 : nameOf.isSome) ? (0, _util.u8aToString)(nameOf.unwrap()[0]).substr(0, api.consts.nicks.maxLength.toNumber()) : undefined));\n}\n\nfunction extractIdentity(identityOfOpt, superOf) {\n  if (!(identityOfOpt === null || identityOfOpt === void 0 ? void 0 : identityOfOpt.isSome)) {\n    return {\n      judgements: []\n    };\n  }\n\n  const {\n    info,\n    judgements\n  } = identityOfOpt.unwrap();\n  const topDisplay = dataAsString(info.display);\n  return {\n    display: superOf ? dataAsString(superOf[1]) || topDisplay : topDisplay,\n    displayParent: superOf ? topDisplay : undefined,\n    email: dataAsString(info.email),\n    image: dataAsString(info.image),\n    judgements,\n    legal: dataAsString(info.legal),\n    other: info.additional.reduce((other, [_key, _value]) => {\n      const key = dataAsString(_key);\n      const value = dataAsString(_value);\n\n      if (key && value) {\n        other[key] = value;\n      }\n\n      return other;\n    }, {}),\n    parent: superOf ? superOf[0] : undefined,\n    pgp: info.pgpFingerprint.isSome ? info.pgpFingerprint.unwrap().toHex() : undefined,\n    riot: dataAsString(info.riot),\n    twitter: dataAsString(info.twitter),\n    web: dataAsString(info.web)\n  };\n}\n\nfunction retrieveIdentity(api, accountId) {\n  var _api$query$identity;\n\n  return (accountId && ((_api$query$identity = api.query.identity) === null || _api$query$identity === void 0 ? void 0 : _api$query$identity.identityOf) ? api.queryMulti([[api.query.identity.identityOf, accountId], [api.query.identity.superOf, accountId]]) : (0, _rxjs.of)([undefined, undefined])).pipe((0, _operators.switchMap)(([identityOfOpt, superOfOpt]) => {\n    if (identityOfOpt === null || identityOfOpt === void 0 ? void 0 : identityOfOpt.isSome) {\n      // this identity has something set\n      return (0, _rxjs.of)([identityOfOpt, undefined]);\n    } else if (superOfOpt === null || superOfOpt === void 0 ? void 0 : superOfOpt.isSome) {\n      const superOf = superOfOpt.unwrap(); // we have a super\n\n      return (0, _rxjs.combineLatest)([api.query.identity.identityOf(superOf[0]), (0, _rxjs.of)(superOf)]);\n    } // nothing of value returned\n\n\n    return (0, _rxjs.of)([undefined, undefined]);\n  }), (0, _operators.map)(([identityOfOpt, superOf]) => extractIdentity(identityOfOpt, superOf)));\n}\n/**\n * @name info\n * @description Returns aux. info with regards to an account, current that includes the accountId, accountIndex and nickname\n */\n\n\nfunction info(instanceId, api) {\n  return (0, _util2.memo)(instanceId, address => api.derive.accounts.idAndIndex(address).pipe((0, _operators.switchMap)(([accountId, accountIndex]) => (0, _rxjs.combineLatest)([(0, _rxjs.of)({\n    accountId,\n    accountIndex\n  }), retrieveIdentity(api, accountId), retrieveNick(api, accountId)])), (0, _operators.map)(([{\n    accountId,\n    accountIndex\n  }, identity, nickname]) => ({\n    accountId,\n    accountIndex,\n    identity,\n    nickname\n  }))));\n}"]},"metadata":{},"sourceType":"script"}