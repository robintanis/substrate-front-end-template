{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toBn = _interopRequireDefault(require(\"../bn/toBn\"));\n\nvar _boolean = _interopRequireDefault(require(\"../is/boolean\"));\n\nvar _undefined = _interopRequireDefault(require(\"../is/undefined\"));\n\nvar _formatDecimal = _interopRequireDefault(require(\"./formatDecimal\"));\n\nvar _si = require(\"./si\"); // Copyright 2017-2020 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n\nconst DEFAULT_DECIMALS = 0;\nconst DEFAULT_UNIT = _si.SI[_si.SI_MID].text;\nlet defaultDecimals = DEFAULT_DECIMALS;\nlet defaultUnit = DEFAULT_UNIT; // Formats a string/number with <prefix>.<postfix><type> notation\n\nfunction _formatBalance(input, options = true, optDecimals = defaultDecimals) {\n  let text = (0, _toBn.default)(input).toString();\n\n  if (text.length === 0 || text === '0') {\n    return '0';\n  } // strip the negative sign so we can work with clean groupings, re-add this in the\n  // end when we return the result (from here on we work with positive numbers)\n\n\n  const isNegative = text[0].startsWith('-');\n\n  if (isNegative) {\n    text = text.substr(1);\n  } // extract options - the boolean case is for backwards-compat\n\n\n  const {\n    decimals = optDecimals,\n    forceUnit = undefined,\n    withSi = true,\n    withSiFull = false,\n    withUnit = true\n  } = (0, _boolean.default)(options) ? {\n    withSi: options\n  } : options; // NOTE We start at midpoint (8) minus 1 - this means that values display as\n  // 123.456 instead of 0.123k (so always 6 relevant). Additionally we us ceil\n  // so there are at most 3 decimal before the decimal seperator\n\n  const si = (0, _si.calcSi)(text, decimals, forceUnit);\n  const mid = text.length - (decimals + si.power);\n  const prefix = text.substr(0, mid);\n  const padding = mid < 0 ? 0 - mid : 0;\n  const postfix = `${`${new Array(padding + 1).join('0')}${text}`.substr(mid < 0 ? 0 : mid)}0000`.substr(0, 4);\n  const units = withSi || withSiFull ? si.value === '-' ? withUnit ? ` ${(0, _boolean.default)(withUnit) ? si.text : withUnit}` : '' : ` ${withSiFull ? si.text : si.value}${withUnit ? `${withSiFull ? ' ' : ''}${(0, _boolean.default)(withUnit) ? _si.SI[_si.SI_MID].text : withUnit}` : ''}` : '';\n  return `${isNegative ? '-' : ''}${(0, _formatDecimal.default)(prefix || '0')}.${postfix}${units}`;\n}\n\nconst formatBalance = _formatBalance; // eslint-disable-next-line @typescript-eslint/unbound-method\n\nformatBalance.calcSi = (text, decimals = defaultDecimals) => (0, _si.calcSi)(text, decimals); // eslint-disable-next-line @typescript-eslint/unbound-method\n\n\nformatBalance.findSi = _si.findSi; // eslint-disable-next-line @typescript-eslint/unbound-method\n\nformatBalance.getDefaults = () => {\n  return {\n    decimals: defaultDecimals,\n    unit: defaultUnit\n  };\n}; // get allowable options to display in a dropdown\n// eslint-disable-next-line @typescript-eslint/unbound-method\n\n\nformatBalance.getOptions = (decimals = defaultDecimals) => {\n  return _si.SI.filter(({\n    power\n  }) => power < 0 ? decimals + power >= 0 : true);\n}; // Sets the default decimals to use for formatting (ui-wide)\n// eslint-disable-next-line @typescript-eslint/unbound-method\n\n\nformatBalance.setDefaults = ({\n  decimals,\n  unit\n}) => {\n  defaultDecimals = (0, _undefined.default)(decimals) ? defaultDecimals : decimals;\n  defaultUnit = (0, _undefined.default)(unit) ? defaultUnit : unit;\n  _si.SI[_si.SI_MID].text = defaultUnit;\n};\n\nvar _default = formatBalance;\nexports.default = _default;","map":{"version":3,"sources":["/home/robin/substrate-front-end-template/node_modules/@polkadot/util/format/formatBalance.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_toBn","_boolean","_undefined","_formatDecimal","_si","DEFAULT_DECIMALS","DEFAULT_UNIT","SI","SI_MID","text","defaultDecimals","defaultUnit","_formatBalance","input","options","optDecimals","toString","length","isNegative","startsWith","substr","decimals","forceUnit","undefined","withSi","withSiFull","withUnit","si","calcSi","mid","power","prefix","padding","postfix","Array","join","units","formatBalance","findSi","getDefaults","unit","getOptions","filter","setDefaults","_default"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,KAAK,GAAGP,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAlC;;AAEA,IAAIO,QAAQ,GAAGR,sBAAsB,CAACC,OAAO,CAAC,eAAD,CAAR,CAArC;;AAEA,IAAIQ,UAAU,GAAGT,sBAAsB,CAACC,OAAO,CAAC,iBAAD,CAAR,CAAvC;;AAEA,IAAIS,cAAc,GAAGV,sBAAsB,CAACC,OAAO,CAAC,iBAAD,CAAR,CAA3C;;AAEA,IAAIU,GAAG,GAAGV,OAAO,CAAC,MAAD,CAAjB,C,CAEA;AACA;;;AACA,MAAMW,gBAAgB,GAAG,CAAzB;AACA,MAAMC,YAAY,GAAGF,GAAG,CAACG,EAAJ,CAAOH,GAAG,CAACI,MAAX,EAAmBC,IAAxC;AACA,IAAIC,eAAe,GAAGL,gBAAtB;AACA,IAAIM,WAAW,GAAGL,YAAlB,C,CAAgC;;AAEhC,SAASM,cAAT,CAAwBC,KAAxB,EAA+BC,OAAO,GAAG,IAAzC,EAA+CC,WAAW,GAAGL,eAA7D,EAA8E;AAC5E,MAAID,IAAI,GAAG,CAAC,GAAGT,KAAK,CAACD,OAAV,EAAmBc,KAAnB,EAA0BG,QAA1B,EAAX;;AAEA,MAAIP,IAAI,CAACQ,MAAL,KAAgB,CAAhB,IAAqBR,IAAI,KAAK,GAAlC,EAAuC;AACrC,WAAO,GAAP;AACD,GAL2E,CAK1E;AACF;;;AAGA,QAAMS,UAAU,GAAGT,IAAI,CAAC,CAAD,CAAJ,CAAQU,UAAR,CAAmB,GAAnB,CAAnB;;AAEA,MAAID,UAAJ,EAAgB;AACdT,IAAAA,IAAI,GAAGA,IAAI,CAACW,MAAL,CAAY,CAAZ,CAAP;AACD,GAb2E,CAa1E;;;AAGF,QAAM;AACJC,IAAAA,QAAQ,GAAGN,WADP;AAEJO,IAAAA,SAAS,GAAGC,SAFR;AAGJC,IAAAA,MAAM,GAAG,IAHL;AAIJC,IAAAA,UAAU,GAAG,KAJT;AAKJC,IAAAA,QAAQ,GAAG;AALP,MAMF,CAAC,GAAGzB,QAAQ,CAACF,OAAb,EAAsBe,OAAtB,IAAiC;AACnCU,IAAAA,MAAM,EAAEV;AAD2B,GAAjC,GAEAA,OARJ,CAhB4E,CAwB/D;AACb;AACA;;AAEA,QAAMa,EAAE,GAAG,CAAC,GAAGvB,GAAG,CAACwB,MAAR,EAAgBnB,IAAhB,EAAsBY,QAAtB,EAAgCC,SAAhC,CAAX;AACA,QAAMO,GAAG,GAAGpB,IAAI,CAACQ,MAAL,IAAeI,QAAQ,GAAGM,EAAE,CAACG,KAA7B,CAAZ;AACA,QAAMC,MAAM,GAAGtB,IAAI,CAACW,MAAL,CAAY,CAAZ,EAAeS,GAAf,CAAf;AACA,QAAMG,OAAO,GAAGH,GAAG,GAAG,CAAN,GAAU,IAAIA,GAAd,GAAoB,CAApC;AACA,QAAMI,OAAO,GAAI,GAAG,GAAE,IAAIC,KAAJ,CAAUF,OAAO,GAAG,CAApB,EAAuBG,IAAvB,CAA4B,GAA5B,CAAiC,GAAE1B,IAAK,EAA3C,CAA6CW,MAA7C,CAAoDS,GAAG,GAAG,CAAN,GAAU,CAAV,GAAcA,GAAlE,CAAuE,MAA1E,CAAgFT,MAAhF,CAAuF,CAAvF,EAA0F,CAA1F,CAAhB;AACA,QAAMgB,KAAK,GAAGZ,MAAM,IAAIC,UAAV,GAAuBE,EAAE,CAAC7B,KAAH,KAAa,GAAb,GAAmB4B,QAAQ,GAAI,IAAG,CAAC,GAAGzB,QAAQ,CAACF,OAAb,EAAsB2B,QAAtB,IAAkCC,EAAE,CAAClB,IAArC,GAA4CiB,QAAS,EAA5D,GAAgE,EAA3F,GAAiG,IAAGD,UAAU,GAAGE,EAAE,CAAClB,IAAN,GAAakB,EAAE,CAAC7B,KAAM,GAAE4B,QAAQ,GAAI,GAAED,UAAU,GAAG,GAAH,GAAS,EAAG,GAAE,CAAC,GAAGxB,QAAQ,CAACF,OAAb,EAAsB2B,QAAtB,IAAkCtB,GAAG,CAACG,EAAJ,CAAOH,GAAG,CAACI,MAAX,EAAmBC,IAArD,GAA4DiB,QAAS,EAAnG,GAAuG,EAAG,EAA/Q,GAAmR,EAAjS;AACA,SAAQ,GAAER,UAAU,GAAG,GAAH,GAAS,EAAG,GAAE,CAAC,GAAGf,cAAc,CAACJ,OAAnB,EAA4BgC,MAAM,IAAI,GAAtC,CAA2C,IAAGE,OAAQ,GAAEG,KAAM,EAAhG;AACD;;AAED,MAAMC,aAAa,GAAGzB,cAAtB,C,CAAsC;;AAEtCyB,aAAa,CAACT,MAAd,GAAuB,CAACnB,IAAD,EAAOY,QAAQ,GAAGX,eAAlB,KAAsC,CAAC,GAAGN,GAAG,CAACwB,MAAR,EAAgBnB,IAAhB,EAAsBY,QAAtB,CAA7D,C,CAA8F;;;AAG9FgB,aAAa,CAACC,MAAd,GAAuBlC,GAAG,CAACkC,MAA3B,C,CAAmC;;AAEnCD,aAAa,CAACE,WAAd,GAA4B,MAAM;AAChC,SAAO;AACLlB,IAAAA,QAAQ,EAAEX,eADL;AAEL8B,IAAAA,IAAI,EAAE7B;AAFD,GAAP;AAID,CALD,C,CAKG;AACH;;;AAGA0B,aAAa,CAACI,UAAd,GAA2B,CAACpB,QAAQ,GAAGX,eAAZ,KAAgC;AACzD,SAAON,GAAG,CAACG,EAAJ,CAAOmC,MAAP,CAAc,CAAC;AACpBZ,IAAAA;AADoB,GAAD,KAEfA,KAAK,GAAG,CAAR,GAAYT,QAAQ,GAAGS,KAAX,IAAoB,CAAhC,GAAoC,IAFnC,CAAP;AAGD,CAJD,C,CAIG;AACH;;;AAGAO,aAAa,CAACM,WAAd,GAA4B,CAAC;AAC3BtB,EAAAA,QAD2B;AAE3BmB,EAAAA;AAF2B,CAAD,KAGtB;AACJ9B,EAAAA,eAAe,GAAG,CAAC,GAAGR,UAAU,CAACH,OAAf,EAAwBsB,QAAxB,IAAoCX,eAApC,GAAsDW,QAAxE;AACAV,EAAAA,WAAW,GAAG,CAAC,GAAGT,UAAU,CAACH,OAAf,EAAwByC,IAAxB,IAAgC7B,WAAhC,GAA8C6B,IAA5D;AACApC,EAAAA,GAAG,CAACG,EAAJ,CAAOH,GAAG,CAACI,MAAX,EAAmBC,IAAnB,GAA0BE,WAA1B;AACD,CAPD;;AASA,IAAIiC,QAAQ,GAAGP,aAAf;AACAxC,OAAO,CAACE,OAAR,GAAkB6C,QAAlB","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toBn = _interopRequireDefault(require(\"../bn/toBn\"));\n\nvar _boolean = _interopRequireDefault(require(\"../is/boolean\"));\n\nvar _undefined = _interopRequireDefault(require(\"../is/undefined\"));\n\nvar _formatDecimal = _interopRequireDefault(require(\"./formatDecimal\"));\n\nvar _si = require(\"./si\");\n\n// Copyright 2017-2020 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nconst DEFAULT_DECIMALS = 0;\nconst DEFAULT_UNIT = _si.SI[_si.SI_MID].text;\nlet defaultDecimals = DEFAULT_DECIMALS;\nlet defaultUnit = DEFAULT_UNIT; // Formats a string/number with <prefix>.<postfix><type> notation\n\nfunction _formatBalance(input, options = true, optDecimals = defaultDecimals) {\n  let text = (0, _toBn.default)(input).toString();\n\n  if (text.length === 0 || text === '0') {\n    return '0';\n  } // strip the negative sign so we can work with clean groupings, re-add this in the\n  // end when we return the result (from here on we work with positive numbers)\n\n\n  const isNegative = text[0].startsWith('-');\n\n  if (isNegative) {\n    text = text.substr(1);\n  } // extract options - the boolean case is for backwards-compat\n\n\n  const {\n    decimals = optDecimals,\n    forceUnit = undefined,\n    withSi = true,\n    withSiFull = false,\n    withUnit = true\n  } = (0, _boolean.default)(options) ? {\n    withSi: options\n  } : options; // NOTE We start at midpoint (8) minus 1 - this means that values display as\n  // 123.456 instead of 0.123k (so always 6 relevant). Additionally we us ceil\n  // so there are at most 3 decimal before the decimal seperator\n\n  const si = (0, _si.calcSi)(text, decimals, forceUnit);\n  const mid = text.length - (decimals + si.power);\n  const prefix = text.substr(0, mid);\n  const padding = mid < 0 ? 0 - mid : 0;\n  const postfix = `${`${new Array(padding + 1).join('0')}${text}`.substr(mid < 0 ? 0 : mid)}0000`.substr(0, 4);\n  const units = withSi || withSiFull ? si.value === '-' ? withUnit ? ` ${(0, _boolean.default)(withUnit) ? si.text : withUnit}` : '' : ` ${withSiFull ? si.text : si.value}${withUnit ? `${withSiFull ? ' ' : ''}${(0, _boolean.default)(withUnit) ? _si.SI[_si.SI_MID].text : withUnit}` : ''}` : '';\n  return `${isNegative ? '-' : ''}${(0, _formatDecimal.default)(prefix || '0')}.${postfix}${units}`;\n}\n\nconst formatBalance = _formatBalance; // eslint-disable-next-line @typescript-eslint/unbound-method\n\nformatBalance.calcSi = (text, decimals = defaultDecimals) => (0, _si.calcSi)(text, decimals); // eslint-disable-next-line @typescript-eslint/unbound-method\n\n\nformatBalance.findSi = _si.findSi; // eslint-disable-next-line @typescript-eslint/unbound-method\n\nformatBalance.getDefaults = () => {\n  return {\n    decimals: defaultDecimals,\n    unit: defaultUnit\n  };\n}; // get allowable options to display in a dropdown\n// eslint-disable-next-line @typescript-eslint/unbound-method\n\n\nformatBalance.getOptions = (decimals = defaultDecimals) => {\n  return _si.SI.filter(({\n    power\n  }) => power < 0 ? decimals + power >= 0 : true);\n}; // Sets the default decimals to use for formatting (ui-wide)\n// eslint-disable-next-line @typescript-eslint/unbound-method\n\n\nformatBalance.setDefaults = ({\n  decimals,\n  unit\n}) => {\n  defaultDecimals = (0, _undefined.default)(decimals) ? defaultDecimals : decimals;\n  defaultUnit = (0, _undefined.default)(unit) ? defaultUnit : unit;\n  _si.SI[_si.SI_MID].text = defaultUnit;\n};\n\nvar _default = formatBalance;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}