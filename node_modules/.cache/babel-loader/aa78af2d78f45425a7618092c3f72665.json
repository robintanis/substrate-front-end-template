{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.info = info;\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"../util\"); // Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n\nfunction sortAccounts([, balanceA], [, balanceB]) {\n  return balanceB.cmp(balanceA);\n}\n\nfunction queryElections(api) {\n  const section = api.query.electionsPhragmen ? 'electionsPhragmen' : 'elections';\n  return api.queryMulti([api.query.council.members, api.query[section].candidates, api.query[section].members, api.query[section].runnersUp]).pipe((0, _operators.map)(([councilMembers, candidates, members, runnersUp]) => ({\n    candidacyBond: api.consts[section].candidacyBond,\n    candidateCount: api.registry.createType('u32', candidates.length),\n    candidates,\n    desiredRunnersUp: api.consts[section].desiredRunnersUp,\n    desiredSeats: api.consts[section].desiredMembers,\n    members: members.length ? members.sort(sortAccounts) : councilMembers.map(accountId => [accountId, api.registry.createType('Balance')]),\n    runnersUp: runnersUp.sort(sortAccounts),\n    termDuration: api.consts[section].termDuration,\n    votingBond: api.consts[section].votingBond\n  })));\n}\n/**\n * @name info\n * @returns An object containing the combined results of the storage queries for\n * all relevant election module properties.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.elections.info(({ members, candidates }) => {\n *   console.log(`There are currently ${members.length} council members and ${candidates.length} prospective council candidates.`);\n * });\n * ```\n */\n\n\nfunction info(instanceId, api) {\n  return (0, _util.memo)(instanceId, () => queryElections(api));\n}","map":{"version":3,"sources":["/home/robin/substrate-front-end-template/node_modules/@polkadot/api-derive/elections/info.js"],"names":["Object","defineProperty","exports","value","info","_operators","require","_util","sortAccounts","balanceA","balanceB","cmp","queryElections","api","section","query","electionsPhragmen","queryMulti","council","members","candidates","runnersUp","pipe","map","councilMembers","candidacyBond","consts","candidateCount","registry","createType","length","desiredRunnersUp","desiredSeats","desiredMembers","sort","accountId","termDuration","votingBond","instanceId","memo"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,IAAR,GAAeA,IAAf;;AAEA,IAAIC,UAAU,GAAGC,OAAO,CAAC,gBAAD,CAAxB;;AAEA,IAAIC,KAAK,GAAGD,OAAO,CAAC,SAAD,CAAnB,C,CAEA;AACA;;;AACA,SAASE,YAAT,CAAsB,GAAGC,QAAH,CAAtB,EAAoC,GAAGC,QAAH,CAApC,EAAkD;AAChD,SAAOA,QAAQ,CAACC,GAAT,CAAaF,QAAb,CAAP;AACD;;AAED,SAASG,cAAT,CAAwBC,GAAxB,EAA6B;AAC3B,QAAMC,OAAO,GAAGD,GAAG,CAACE,KAAJ,CAAUC,iBAAV,GAA8B,mBAA9B,GAAoD,WAApE;AACA,SAAOH,GAAG,CAACI,UAAJ,CAAe,CAACJ,GAAG,CAACE,KAAJ,CAAUG,OAAV,CAAkBC,OAAnB,EAA4BN,GAAG,CAACE,KAAJ,CAAUD,OAAV,EAAmBM,UAA/C,EAA2DP,GAAG,CAACE,KAAJ,CAAUD,OAAV,EAAmBK,OAA9E,EAAuFN,GAAG,CAACE,KAAJ,CAAUD,OAAV,EAAmBO,SAA1G,CAAf,EAAqIC,IAArI,CAA0I,CAAC,GAAGjB,UAAU,CAACkB,GAAf,EAAoB,CAAC,CAACC,cAAD,EAAiBJ,UAAjB,EAA6BD,OAA7B,EAAsCE,SAAtC,CAAD,MAAuD;AAC1NI,IAAAA,aAAa,EAAEZ,GAAG,CAACa,MAAJ,CAAWZ,OAAX,EAAoBW,aADuL;AAE1NE,IAAAA,cAAc,EAAEd,GAAG,CAACe,QAAJ,CAAaC,UAAb,CAAwB,KAAxB,EAA+BT,UAAU,CAACU,MAA1C,CAF0M;AAG1NV,IAAAA,UAH0N;AAI1NW,IAAAA,gBAAgB,EAAElB,GAAG,CAACa,MAAJ,CAAWZ,OAAX,EAAoBiB,gBAJoL;AAK1NC,IAAAA,YAAY,EAAEnB,GAAG,CAACa,MAAJ,CAAWZ,OAAX,EAAoBmB,cALwL;AAM1Nd,IAAAA,OAAO,EAAEA,OAAO,CAACW,MAAR,GAAiBX,OAAO,CAACe,IAAR,CAAa1B,YAAb,CAAjB,GAA8CgB,cAAc,CAACD,GAAf,CAAmBY,SAAS,IAAI,CAACA,SAAD,EAAYtB,GAAG,CAACe,QAAJ,CAAaC,UAAb,CAAwB,SAAxB,CAAZ,CAAhC,CANmK;AAO1NR,IAAAA,SAAS,EAAEA,SAAS,CAACa,IAAV,CAAe1B,YAAf,CAP+M;AAQ1N4B,IAAAA,YAAY,EAAEvB,GAAG,CAACa,MAAJ,CAAWZ,OAAX,EAAoBsB,YARwL;AAS1NC,IAAAA,UAAU,EAAExB,GAAG,CAACa,MAAJ,CAAWZ,OAAX,EAAoBuB;AAT0L,GAAvD,CAApB,CAA1I,CAAP;AAWD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,SAASjC,IAAT,CAAckC,UAAd,EAA0BzB,GAA1B,EAA+B;AAC7B,SAAO,CAAC,GAAGN,KAAK,CAACgC,IAAV,EAAgBD,UAAhB,EAA4B,MAAM1B,cAAc,CAACC,GAAD,CAAhD,CAAP;AACD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.info = info;\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _util = require(\"../util\");\n\n// Copyright 2017-2020 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nfunction sortAccounts([, balanceA], [, balanceB]) {\n  return balanceB.cmp(balanceA);\n}\n\nfunction queryElections(api) {\n  const section = api.query.electionsPhragmen ? 'electionsPhragmen' : 'elections';\n  return api.queryMulti([api.query.council.members, api.query[section].candidates, api.query[section].members, api.query[section].runnersUp]).pipe((0, _operators.map)(([councilMembers, candidates, members, runnersUp]) => ({\n    candidacyBond: api.consts[section].candidacyBond,\n    candidateCount: api.registry.createType('u32', candidates.length),\n    candidates,\n    desiredRunnersUp: api.consts[section].desiredRunnersUp,\n    desiredSeats: api.consts[section].desiredMembers,\n    members: members.length ? members.sort(sortAccounts) : councilMembers.map(accountId => [accountId, api.registry.createType('Balance')]),\n    runnersUp: runnersUp.sort(sortAccounts),\n    termDuration: api.consts[section].termDuration,\n    votingBond: api.consts[section].votingBond\n  })));\n}\n/**\n * @name info\n * @returns An object containing the combined results of the storage queries for\n * all relevant election module properties.\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.elections.info(({ members, candidates }) => {\n *   console.log(`There are currently ${members.length} council members and ${candidates.length} prospective council candidates.`);\n * });\n * ```\n */\n\n\nfunction info(instanceId, api) {\n  return (0, _util.memo)(instanceId, () => queryElections(api));\n}"]},"metadata":{},"sourceType":"script"}