{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getUniqTypes;\n\nvar _flattenUniq = _interopRequireDefault(require(\"./flattenUniq\"));\n\nvar _validateTypes = _interopRequireDefault(require(\"./validateTypes\")); // Copyright 2017-2020 @polkadot/metadata authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n/** @internal */\n\n\nfunction unwrapCalls(mod) {\n  return mod.calls ? mod.calls.unwrapOr([]) // V0\n  : mod.module ? mod.module.call.functions : [];\n}\n/** @internal */\n\n\nfunction getCallNames({\n  modules\n}) {\n  return modules.map(mod => unwrapCalls(mod).map(({\n    args\n  }) => args.map(arg => arg.type.toString())));\n}\n/** @internal */\n\n\nfunction getConstantNames({\n  modules\n}) {\n  return modules.map(({\n    constants\n  }) => constants ? constants.map(constant => constant.type.toString()) : []);\n}\n/** @internal */\n\n\nfunction unwrapEvents(events) {\n  if (!events) {\n    return [];\n  }\n\n  return events.unwrapOr([]);\n}\n/** @internal */\n\n\nfunction getEventNames({\n  modules,\n  outerEvent\n}) {\n  const mapArg = ({\n    args\n  }) => args.map(arg => arg.toString()); // V0\n\n\n  if (outerEvent) {\n    return outerEvent.events.map(([, events]) => events.map(mapArg));\n  } // V1+\n\n\n  return modules.map(({\n    events\n  }) => unwrapEvents(events).map(mapArg));\n}\n/** @internal */\n\n\nfunction unwrapStorage(storage) {\n  if (!storage) {\n    return [];\n  }\n\n  const data = storage.unwrapOr([]);\n  return Array.isArray(data) ? data : data.items || data.functions;\n}\n/** @internal */\n\n\nfunction getStorageNames({\n  modules\n}) {\n  return modules.map(({\n    storage\n  }) => unwrapStorage(storage).map(({\n    type\n  }) => {\n    if (type.isDoubleMap && type.asDoubleMap) {\n      return [type.asDoubleMap.key1.toString(), type.asDoubleMap.key2.toString(), type.asDoubleMap.value.toString()];\n    } else if (type.isMap) {\n      return [type.asMap.key.toString(), type.asMap.value.toString()];\n    } else {\n      return [type.asPlain.toString()];\n    }\n  }));\n}\n/** @internal */\n\n\nfunction getUniqTypes(registry, meta, throwError) {\n  const types = (0, _flattenUniq.default)([getCallNames(meta), getConstantNames(meta), getEventNames(meta), getStorageNames(meta)]);\n  (0, _validateTypes.default)(registry, types, throwError);\n  return types;\n}","map":{"version":3,"sources":["/home/robin/substrate-front-end-template/node_modules/@polkadot/metadata/Metadata/util/getUniqTypes.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","getUniqTypes","_flattenUniq","_validateTypes","unwrapCalls","mod","calls","unwrapOr","module","call","functions","getCallNames","modules","map","args","arg","type","toString","getConstantNames","constants","constant","unwrapEvents","events","getEventNames","outerEvent","mapArg","unwrapStorage","storage","data","Array","isArray","items","getStorageNames","isDoubleMap","asDoubleMap","key1","key2","isMap","asMap","key","asPlain","registry","meta","throwError","types"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = getUniqTypes;\n\nvar _flattenUniq = _interopRequireDefault(require(\"./flattenUniq\"));\n\nvar _validateTypes = _interopRequireDefault(require(\"./validateTypes\"));\n\n// Copyright 2017-2020 @polkadot/metadata authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n/** @internal */\nfunction unwrapCalls(mod) {\n  return mod.calls ? mod.calls.unwrapOr([]) // V0\n  : mod.module ? mod.module.call.functions : [];\n}\n/** @internal */\n\n\nfunction getCallNames({\n  modules\n}) {\n  return modules.map(mod => unwrapCalls(mod).map(({\n    args\n  }) => args.map(arg => arg.type.toString())));\n}\n/** @internal */\n\n\nfunction getConstantNames({\n  modules\n}) {\n  return modules.map(({\n    constants\n  }) => constants ? constants.map(constant => constant.type.toString()) : []);\n}\n/** @internal */\n\n\nfunction unwrapEvents(events) {\n  if (!events) {\n    return [];\n  }\n\n  return events.unwrapOr([]);\n}\n/** @internal */\n\n\nfunction getEventNames({\n  modules,\n  outerEvent\n}) {\n  const mapArg = ({\n    args\n  }) => args.map(arg => arg.toString()); // V0\n\n\n  if (outerEvent) {\n    return outerEvent.events.map(([, events]) => events.map(mapArg));\n  } // V1+\n\n\n  return modules.map(({\n    events\n  }) => unwrapEvents(events).map(mapArg));\n}\n/** @internal */\n\n\nfunction unwrapStorage(storage) {\n  if (!storage) {\n    return [];\n  }\n\n  const data = storage.unwrapOr([]);\n  return Array.isArray(data) ? data : data.items || data.functions;\n}\n/** @internal */\n\n\nfunction getStorageNames({\n  modules\n}) {\n  return modules.map(({\n    storage\n  }) => unwrapStorage(storage).map(({\n    type\n  }) => {\n    if (type.isDoubleMap && type.asDoubleMap) {\n      return [type.asDoubleMap.key1.toString(), type.asDoubleMap.key2.toString(), type.asDoubleMap.value.toString()];\n    } else if (type.isMap) {\n      return [type.asMap.key.toString(), type.asMap.value.toString()];\n    } else {\n      return [type.asPlain.toString()];\n    }\n  }));\n}\n/** @internal */\n\n\nfunction getUniqTypes(registry, meta, throwError) {\n  const types = (0, _flattenUniq.default)([getCallNames(meta), getConstantNames(meta), getEventNames(meta), getStorageNames(meta)]);\n  (0, _validateTypes.default)(registry, types, throwError);\n  return types;\n}"]},"metadata":{},"sourceType":"script"}